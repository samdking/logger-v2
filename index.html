<!doctype html>
<html>
	<head>
		<link rel="stylesheet" href="logger.css" />
	</head>
	<body>

		<div class="tickets block">
			<div class="filters">
				<input class="query" data-bind="value: query, valueUpdate: 'keyup'">
				<fieldset data-bind="foreach: departments">
					<label>
						<input type="checkbox" data-bind="value: uid, checked: selected" />
						<span data-bind="text: name"></span>
					</label>
				</fieldset>
			</div>
			<!--<div data-bind="text: ticketCount"></div>-->
			<ul data-bind="visible: filteredTickets, foreach: filteredTickets">
				<li data-bind="click: $parent.viewTicket, css: {selected: $data == $root.selectedTicket()}">
					<ul class="people" data-bind="foreach: people()">
						<li><span class="person" data-bind="css: {me: $data == $root.initials}, text: $data"></span></li>
					</ul>
					<strong data-bind="css: {today: loggedToday()}">
						<span data-bind="text: summary"></span>
						<span data-bind="visible: loggedToday(), text: taskCount" class="task-count"></span>
						<span data-bind="" class="time-today"></span>
					</strong>
					<span class="days-ago" data-bind="visible: timeAgo(), text: timeAgo()"></span>
					<span style="color: blue" data-bind="text: client"></span> 
				</li>
			</ul>
			<a class="show-more" data-bind="visible: filteredTickets().length < ticketCount(), click: showMore">More</a>
		</div>

		<div class="ticket block">
			<div class="detail" data-bind="if: selectedTicket">
				<strong data-bind="text: selectedTicket().summary"></strong>
				<div data-bind="html: selectedTicket().description"></div>
				<table class="tasks">
					<tbody>
					<!-- ko foreach: selectedTicket().tasks -->
						<tr>
							<td><span data-bind="text: $data.description"></span></td>
							<td><span data-bind="text: $data.duration"></span></td>
						</tr>
					<!-- /ko -->
					</tbody>
				</table>
				<p data-bind="visible: !selectedTicket().tasks().length">No tasks logged today</p>
			</div>
		</div>

		<script src="ko.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script src="script.js"></script>
	</body>
</html>